<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>建党节</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="http://at.alicdn.com/t/font_720197_jdrm7aw0ucl.css">
</head>
<body>
<div id="party" class="flexv mainbox ">
    <a href="javascript:;" class="flex center make-btn">我也发起</a>
    <div class="bj">
        <div class="between header">
            <a href="javascript:;" class="flex center rule">活动规则</a>
            <a href="javascript:;" class="play_yinfu spin">
                <audio autoplay="autoplay" loop="loop" src="https://res.wx.qq.com/voice/getvoice?mediaid=MzIxNTkwMTIyMl8xMDAwMDU2MzY="></audio>
            </a>
        </div>
        <div class="around logobox">
            <div class="flex text-img"><img src="image/diffuse-t.png" class="fitimg"></div>
            <div class="flexitem logo"><img src="image/brand.png" class="fitimg"></div>
            <div class="flex text-img"><img src="image/share-t.png" class="fitimg"></div>
        </div>
        <div class="flipbox">
            <div class="bor">
                <div class="flex centerv flip">
                    <div class="user-img"><img src="image/user.jpg" class="fitimg"></div>
                    <div class="flex text">恭喜&ensp;<span class="flexv name">王尼</span>&ensp;成功跟上党的脚步！1秒前</div>
                </div>
                <div class="flex centerv flip">
                    <div class="user-img"><img src="image/user.jpg" class="fitimg"></div>
                    <div class="flex text">恭喜&ensp;<span class="flexv name">王尼玛</span>&ensp;成功跟上党的脚步！2秒前</div>
                </div>
                <div class="flex centerv flip">
                    <div class="user-img"><img src="image/user.jpg" class="fitimg"></div>
                    <div class="flex text">恭喜&ensp;<span class="flexv name">王尼玛啊</span>&ensp;成功跟上党的脚步！3秒前</div>
                </div>
                <div class="flex centerv flip">
                    <div class="user-img"><img src="image/user.jpg" class="fitimg"></div>
                    <div class="flex text">恭喜&ensp;<span class="flexv name">王尼玛啊是</span>&ensp;成功跟上党的脚步！1个小时前</div>
                </div>
            </div>
        </div>
        <div class="flex center slogan"><img src="image/run-t.png" class="fitimg"></div>
        <div class="flex center nation"><i class="flex center gcd gcd-jiao"></i>全国已有 <span>45678912</span> 人跟随党的脚步！</div>
        <div class="person">
            <img src="image/party_person.png" class="fitimg">
            <div class="flex center user-box">
                <div class="flex center user-img">
                    <div class="shadow"></div>
                    <img src="image/user.jpg" class="radimg">
                </div>
                <div class="flexv centerh user-info">
                    <div class="flexv name">小胡的同学</div>
                    <div class="flex centerv phone">13888888888 <a href="tel:13888888888" class="flex center gcd gcd-tel"></a></div>
                </div>
            </div>
        </div>

        <div class="flexv center like-box">
            <a href="javascript:;" class="link-btn"><i class="flex center gcd gcd-s-xin"></i>&nbsp;&nbsp;<span>支持党</span></a>
            <div class="transmit-num">您已带领&nbsp;<span>466</span>&nbsp;人跟随党的脚步前进！</div>
        </div>

        <div class="flex help-friend">
            <div class="nbr">
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯过</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
                <div class="flexv center friend">
                    <div class="user-img"><img src="image/user.jpg" class="radimg"></div>
                    <div class="flexv name">访客尼克斯</div>
                </div>
            </div>
        </div>
        <div class="flex centerv unit">
            <div>号召单位：<img src="image/logo.png" class="radimg">&nbsp;中保会宣传办</div>
        </div>
    </div>
</div>
<div id="footer" class="around">
    <a href="javascript:;" class="flexv center info">
        <i class="flex center gcd gcd-info"></i>
        <span>事业资讯</span>
    </a>
    <a href="javascript:;" class="flexv center wish">
        <i class="flex center rotate"><em class="flex center xin"></em></i>
        <span>我也发起</span>
    </a>
    <a href="javascript:;" class="flexv center home">
        <i class="flex center gcd gcd-home"></i>
        <span>个人中心</span>
    </a>
</div>
</body>
<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script type="text/javascript">
    /**分页
     * @param outerBox [外部容器]
     * @param innerBox [列表容器]
     */
    function pages(outerBox,innerBox){
        let loadBtn = false,page = 1;
        $(outerBox).scroll(function() {
            let h = Math.ceil($(this).scrollLeft()),lh = $(this).width(),ih = $(innerBox).width();
            if((h + lh) >= ih) {
                if(loadBtn) return;
                loadBtn = true;
                page++;
                setTimeout(function () {
                    $(innerBox).append($('<div>别拉了, 没啦</div>'));
                    loadBtn = false;
                },1000)
            }
        });
    }
    //弹窗
    function showAlert(box) {
        $('body').append(box);
        setTimeout(function (){
            let offset = {'height':$('#alert .content').height(),'width': $('#alert .content').width()};
            $('#alert .content').css({
                'margin' : parseInt(-offset.height/2) + 'px 0 0 ' + parseInt(-offset.width/2) + 'px',
            });
            $('#alert .content').css({
                'visibility' : 'visible',
                'transform' : 'scale(1)',
                '-webkit-transform' : 'scale(1)'
            })
        },100);
        // 点击消失
        $('#alert .mask').click(function () {
            $('#alert').remove();
        })
    }
window.onload = function () {
    //滚动显示
    $(()=>{
        $(".flipbox .bor").append($(".flipbox .bor .flip").first());
        setInterval(()=>{
            let objh = $('.flip').height();
            $(".flipbox .bor").append($(".flipbox .bor .flip").first().height(0).animate({"height":objh+"px"},500));
        },2000)
    });

    //背景高光
    $(()=>{
        let num=50;
        setInterval(()=>{
            num-=4;
            if(num <= -40){num=50};
            $('.person').css('background-position', num+'rem 0')
        },100)
    });

    //控制音乐
    const audios = document.querySelector("audio");
     $('.play_yinfu').click(function () {
     if(audios.paused){
     audios.play();
     $(this).addClass('spin');
     } else{
     audios.pause();
     $(this).removeClass('spin');
     }
     });
     audios.play();  //iOS系统自动播放
     //微信必须加入Weixin JSAPI的WeixinJSBridgeReady才能生效
     document.addEventListener("WeixinJSBridgeReady", function () {audios.play()}, false);
    
    //活动规则
    $('a.rule').click(function () {
        const rule = `<div id="alert">
            <div class="mask"></div>
            <div class="content rulebox">
                <img src="image/flag.png" class="flag">
                <p>值此建党节之际，为响应中直会评委组号召，发起“永远跟党走”的号召，让更多的人加入我们的，融入我们的团队，让每一个人都牢牢跟随党的脚步前进！</p>
                <p><span style="color:#f72b20">活动规则：</span></br>累计带领200人跟随党的脚步前进，即可免费领取价值138元的彩铃一份！<span style="color:#f72b20">限量1000份，先到先得，送完为止！</span></p>
                <p>（注：正常使用需要开通彩铃功能，彩铃功能费由运营商收取，费用5~10元详询运营商。）</p>
                <div class="flexv center qrbox">
                    <div class="qr-img"><img src="image/qrcode.jpg" class="fitimg"></div>
                    <p>长按识别二维码</br>联系客服领取优惠</p>
                </div>
            </div>`;
        showAlert(rule);
    })

    //点赞
    $('.link-btn').click(function () {
        if($(this).children('i').hasClass('zc')) return;
        const box = `<div id="alert">
            <div class="mask"></div>
            <div class="content succeed">
                <div class="bj"><img src="image/win-bj.png" class="fitimg"></div>
                <div class="around btn-box">
                    <a href="javascript:;" class="flex center cancel">取消</a>
                    <a href="javascript:;" class="flexitem center confirm">我也要参加</a>
                </div>
            </div>
        </div>`;
        showAlert(box);

        let num = $('.transmit-num').children('span');
        num.text(parseInt(num.text())+1);
        $(this).children('i').addClass('zc');
        $(this).children('span').text('已支持');

        //取消
        $('#alert .cancel').click(function () {
            $('#alert').remove();
        });
    });

    //分享
    $('#footer .wish').click(function () {
        let box = `<div id="alert" class="flex endh"><img src="image/share.png" class="share-img"></div>`;
        $('body').append(box);
        // 点击消失
        $('#alert').click(function () {
            $(this).remove();
        });
    });

    //事业资讯
    $('a.info').click(function () {
        let box = `<div id="alert" class="flex center">
            <div class="mask"></div>
            <div class="flexv center content qrcode-box">
                <h2 class="title">更多免费事业资讯</h2>
                <div class="qrcode"><img src="image/qrcode.jpg" class="fitimg"></div>
                <p class="txt">长按识别二维码</p>
            </div>
        </div>`;
        showAlert(box);
    });

    //左滑滚动
    pages('.help-friend','.nbr');
};
</script>
</html>